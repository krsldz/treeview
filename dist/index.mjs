import{jsxs as n,jsx as e}from"react/jsx-runtime";import{memo as t,useState as o,useMemo as i,useLayoutEffect as a,useCallback as r}from"react";function c(n){var e,t,o="";if("string"==typeof n||"number"==typeof n)o+=n;else if("object"==typeof n)if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=c(n[e]))&&(o&&(o+=" "),o+=t)}else for(t in n)n[t]&&(o&&(o+=" "),o+=t);return o}function l(){for(var n,e,t=0,o="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=c(n))&&(o&&(o+=" "),o+=e);return o}function s(n,e){void 0===e&&(e={});var t=e.insertAt;if(n&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===t&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n))}}s('.checkboxWrap {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.checkboxWrap input[type="checkbox"] {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 16px;\n  height: 16px;\n  border-radius: 2px;\n  border: 1px solid #4C4C4C;\n  outline: none;\n  cursor: pointer;\n  margin: 0;\n}\n\n.checkboxWrap input[type="checkbox"]:disabled {\n  border-color: #C3C3C3;\n  background-color: #DBDBDB;\n}\n\n.checkboxWrap input[type="checkbox"]:disabled + span {\n  color: #DBDBDB;\n}\n\ninput:checked {\n  background-color: #4C4C4C;\n  position: relative;\n}\n\ninput:checked::before {\n  content: url("/public/check.svg");\n  color: #f8f9fa;\n  position: absolute;\n  right: 1px;\n  top: -1px;\n}\n\ninput.indeterminate {\n  background-color: #4C4C4C;\n  position: relative;\n}\n\ninput.indeterminate::before {\n  content: url("/public/indeterminate.svg");\n  color: #f8f9fa;\n  position: absolute;\n  right: 2px;\n  top: -4px;\n}\n');var d=t((({label:t,onChange:o,checked:i,disabled:a,indeterminate:r,classNames:c})=>n("div",{className:l("checkboxWrap",c.checkbox),children:[e("input",{type:"checkbox","aria-label":t,className:r?l("indeterminate",c.indeterminate):"",onChange:o,checked:i,disabled:a}),e("span",{className:c.label,children:t})]})));s(".dropdown {\n  cursor: pointer;\n}\n\n.icon {\n  width: 12px;\n  height: 12px;\n}\n");var p=t((({open:n,onClick:t,className:o})=>e("div",{className:l("dropdown",o),onClick:t,children:e("img",{className:"icon",src:n?"/chevronDown.svg":"/chevronLeft.svg",alt:"dropdown"})})));s(".nodeWrap {\n  display: flex;\n  padding: 5px 0 5px 5px;\n  gap: 4px;\n}\n\n.node {\n  display: flex;\n  flex-direction: column;\n}\n\n.titleBlock {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.title {\n  margin-left: 16px;\n}\n\n.folderIcon {\n  width: 16px;\n  height: 16px;\n}\n\n");var h=t((({data:t,onlyRead:o,renderChildren:i,onToggle:a,onChange:r,selected:c,indeterminate:s,withIcons:h,classNames:u,iconsComponents:f})=>{const{parentIcon:m,childIcon:b}=f,{data:g,children:x,open:v,id:k}=t,y=x.length>0;return n("div",{className:l("nodeWrap",u.wrap),children:[y&&e(p,{onClick:()=>a(k),open:v,className:u.dropdown}),n("div",{className:l("node",u.node),children:[o?n("div",{className:"titleBlock",children:[h&&(y?m:b),e("span",{className:l(y||h?"":"title",u.label),children:g.title})]}):e(d,{indeterminate:s,checked:c,classNames:Object.assign(Object.assign({},u),{checkbox:l(u.checkbox,y?"":"title")}),onChange:()=>r(t),label:g.title}),v&&y&&e("div",{children:i(x)})]})]})}));const u=(n,e,t)=>n.reduce(((n,o)=>{var i,a;const{value:r,children:c,id:l}=o,s=(null==c?void 0:c.some((n=>t.includes(n.value))))||t.includes(r),d={children:null!==(a=null===(i=o.children)||void 0===i?void 0:i.map((n=>n.id?n.id:n.value)))&&void 0!==a?a:[],data:o,id:l||r,open:s,parent:e||null};let p;return c&&(p=u(c,d.id,t)),Object.assign(Object.assign(Object.assign({},n),p),{[d.id]:d})}),{}),f=(n,e)=>{const{children:t,data:o}=n[e];return[o.value,...t.reduce(((e,t)=>[...e,...f(n,t)]),[])]},m=n=>{if(!n)return[];let e=[];return n.children&&n.children.forEach((n=>{e.push({id:n.value,name:n.title}),e=e.concat(m(n))})),e},b=(n,e)=>!!n.children&&n.children.some((n=>e.includes(n.value)||b(n,e))),g={parentIcon:e("img",{className:"folderIcon",src:"/folderClosed.svg",alt:"folder"}),childIcon:e("img",{className:l("folderIcon","title"),src:"file.svg",alt:"file"})};s('html, body {\n  font-family: sans-serif;\n  font-size: 16px;\n}\n\n.wrap {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n}\n\n.storyCheckbox input[type="checkbox"] {\n  appearance: none;\n  -webkit-appearance: none;\n  width: 20px;\n  height: 20px;\n  border: 2px solid #4caf50;\n  border-radius: 50%;\n  outline: none;\n  cursor: pointer;\n  position: relative;\n  transition: background-color 0.2s ease, border-color 0.2s ease;\n}\n\n.storyCheckbox input[type="checkbox"]:checked {\n  background-color: #4caf50;\n  border-color: #4caf50;\n  position: relative;\n}\n\n.storyCheckbox input[type="checkbox"]:checked::before {\n  content: "";\n  position: absolute;\n  left: 5px;\n  top: 0;\n  width: 5px;\n  height: 10px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n}\n\n.storyCheckbox .indeterminate {\n  background-color: #4caf50;\n  position: relative;\n}\n\n.storyCheckbox .indeterminate::before {\n  content: url("/public/indeterminate.svg");\n  color: #f8f9fa;\n  position: absolute;\n  right: 3px;\n  top: -4px;\n}\n\n\n.storyLabel {\n  margin-left: 5px;\n  font-weight: 200;\n}\n\n.storyDropdown {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  width: 18px;\n  height: 18px;\n  border-radius: 50%;\n  border: 2px solid #4caf50;\n  background-color: #4caf50;\n  color: #4caf50;\n  cursor: pointer;\n  transition: transform 0.2s ease, background-color 0.2s ease;\n  font-size: 14px;\n  line-height: 1;\n  padding: 0;\n}\n\n.storyDropdown img {\n  stroke: #ffff;\n}\n');t((({data:n,onChange:t,value:c=[],classNames:l={},onlyRead:s=!0,withIcons:d=!1,iconsComponents:p=g})=>{const[x,v]=o({}),k=i((()=>c.map((n=>n.id))),[c]);a((()=>{v(u(n,null,k))}),[]);const y=i((()=>Object.keys(x).filter((n=>null===x[n].parent))),[x]),C=r((n=>{const e=Object.assign(Object.assign({},x[n]),{open:!x[n].open});v(Object.assign(Object.assign({},x),{[n]:e}))}),[x]),w=r((n=>{var e;if(!t)return;const{data:o,children:i,parent:a,id:r}=n;let l=[o.value],s=[{id:o.value,name:o.title}];i&&(l=f(x,r));const d=m(o);s=d?[...d,{id:o.value,name:o.title}]:[{id:o.value,name:o.title}];const p=k.includes(o.value)?c.filter((n=>!l.includes(n.id)&&n.id!==a)):(h=[...c,...s],[...new Set(h.map((n=>{const e=Object.keys(n).sort(),t=Object.assign({},...e.map((e=>({[e]:n[e]}))));return JSON.stringify(t)})))].map((n=>JSON.parse(n))));var h;if(a){const n=x[a],o=p.map((n=>n.id));(null===(e=n.data.children)||void 0===e?void 0:e.every((n=>o.includes(n.value))))?(s=[{id:n.data.value,name:n.data.title}],t([...p,...s])):t(p)}else t(p)}),[c,x]),N=n=>{const t=x[n],{data:o}=t,i=k.includes(o.value),a=b(o,k);return e(h,{data:t,classNames:l,onlyRead:s,withIcons:d,iconsComponents:p,renderChildren:n=>n.map(N),onToggle:C,onChange:w,selected:i,indeterminate:!i&&a},n)};return e("div",{className:"wrap",children:y.map(N)})}));
//# sourceMappingURL=index.mjs.map
