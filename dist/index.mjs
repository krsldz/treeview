import{jsxs as e,jsx as n}from"react/jsx-runtime";import*as a from"react";import{memo as t,useState as r,useMemo as l,useLayoutEffect as i,useCallback as c}from"react";function s(e){var n,a,t="";if("string"==typeof e||"number"==typeof e)t+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(n=0;n<r;n++)e[n]&&(a=s(e[n]))&&(t&&(t+=" "),t+=a)}else for(a in e)e[a]&&(t&&(t+=" "),t+=a);return t}function o(){for(var e,n,a=0,t="",r=arguments.length;a<r;a++)(e=arguments[a])&&(n=s(e))&&(t&&(t+=" "),t+=n);return t}var d,u=t((({label:a,onChange:t,checked:r,disabled:l,indeterminate:i,classNames:c})=>e("div",{className:o("checkboxWrap",c.checkbox),children:[n("input",{type:"checkbox","aria-label":a,className:i?o("indeterminate",c.indeterminate):"",onChange:t,checked:r,disabled:l}),n("span",{className:c.label,children:a})]})));function h(){return h=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var t in a)({}).hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},h.apply(null,arguments)}var v,m=function(e){return a.createElement("svg",h({xmlns:"http://www.w3.org/2000/svg",width:9,height:5,fill:"none"},e),d||(d=a.createElement("path",{stroke:"#4C4C4C",strokeLinecap:"round",strokeLinejoin:"round",d:"M1.333 1.167 4.667 4.5 8 1.167"})))};function p(){return p=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var t in a)({}).hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},p.apply(null,arguments)}var g=function(e){return a.createElement("svg",p({xmlns:"http://www.w3.org/2000/svg",width:5,height:8,fill:"none"},e),v||(v=a.createElement("path",{stroke:"#4C4C4C",strokeLinecap:"round",strokeLinejoin:"round",d:"m1 7.167 3.333-3.334L1 .5"})))};var f=t((({open:a,onClick:t,className:r})=>n("div",{className:o("dropdown",r),onClick:t,children:a?e("div",{className:"iconActive",children:[n(m,{})," "]}):n("div",{className:"icon",children:n(g,{})})})));var b=t((({data:a,onlyRead:t,renderChildren:r,onToggle:l,onChange:i,selected:c,indeterminate:s,withIcons:d,classNames:h,iconsComponents:v})=>{const{parentIcon:m,childIcon:p}=v,{data:g,children:b,open:w,id:C}=a,O=b.length>0;return e("div",{className:o("nodeWrap",h.wrap),children:[O&&n(f,{onClick:()=>l(C),open:w,className:h.dropdown}),e("div",{className:o("node",h.node),children:[t?e("div",{className:"titleBlock",children:[d&&(O?m:p),n("span",{className:o(O||d?"":"title",h.label),children:g.title})]}):n(u,{indeterminate:s,checked:c,classNames:Object.assign(Object.assign({},h),{checkbox:o(h.checkbox,O?"":"title")}),onChange:()=>i(a),label:g.title}),w&&O&&n("div",{children:r(b)})]})]})}));const w=(e,n,a)=>e.reduce(((e,t)=>{var r,l;const{value:i,children:c,id:s}=t,o=(null==c?void 0:c.some((e=>a.includes(e.value))))||a.includes(i),d={children:null!==(l=null===(r=t.children)||void 0===r?void 0:r.map((e=>e.id?e.id:e.value)))&&void 0!==l?l:[],data:t,id:s||i,open:o,parent:n||null};let u;return c&&(u=w(c,d.id,a)),Object.assign(Object.assign(Object.assign({},e),u),{[d.id]:d})}),{}),C=(e,n)=>{const{children:a,data:t}=e[n];return[t.value,...a.reduce(((n,a)=>[...n,...C(e,a)]),[])]},O=e=>{if(!e)return[];let n=[];return e.children&&e.children.forEach((e=>{n.push({id:e.value,name:e.title}),n=n.concat(O(e))})),n},j=(e,n)=>!!e.children&&e.children.some((e=>n.includes(e.value)||j(e,n)));var N;function y(){return y=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var t in a)({}).hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},y.apply(null,arguments)}var k;function x(){return x=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var t in a)({}).hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},x.apply(null,arguments)}const E={parentIcon:n("div",{className:"folderIcon",children:n((function(e){return a.createElement("svg",y({xmlns:"http://www.w3.org/2000/svg",width:18,height:15,fill:"none"},e),N||(N=a.createElement("path",{fill:"#4C4C4C",d:"M5.839.5c.611 0 1.19.26 1.557.7l1 1.2q.04.047.098.074a.3.3 0 0 0 .124.026H16a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H1.946a2.06 2.06 0 0 1-1.376-.513A1.67 1.67 0 0 1 0 12.75V2.25C0 1.786.26 1.247.515 1 .769.753 1.029.5 1.946.5z"})))}),{})}),childIcon:n("div",{className:o("folderIcon","title"),children:n((function(e){return a.createElement("svg",x({xmlns:"http://www.w3.org/2000/svg",width:13,height:17,fill:"none"},e),k||(k=a.createElement("path",{fill:"#4C4C4C",fillRule:"evenodd",d:"M7.35.51c.105.021.202.073.278.149l5.213 5.22c.102.102.159.24.159.384v8.203a2.03 2.03 0 0 1-2.031 2.034H2.03A2.03 2.03 0 0 1 0 14.466V2.534A2.03 2.03 0 0 1 2.031.5h5.214zM2.032 1.586a.95.95 0 0 0-.948.949v11.932a.95.95 0 0 0 .948.95h8.938a.95.95 0 0 0 .948-.95V9.042H7.042A.54.54 0 0 1 6.5 8.5V1.585zm5.552 6.373h4.334v-1.47l-4.334-4.34z",clipRule:"evenodd"})))}),{})})};var I=t((({data:e,onChange:a,value:t=[],classNames:s={},onlyRead:o=!0,withIcons:d=!1,iconsComponents:u=E})=>{const[h,v]=r({}),m=l((()=>t.map((e=>e.id))),[t]);i((()=>{v(w(e,null,m))}),[]);const p=l((()=>Object.keys(h).filter((e=>null===h[e].parent))),[h]),g=c((e=>{const n=Object.assign(Object.assign({},h[e]),{open:!h[e].open});v(Object.assign(Object.assign({},h),{[e]:n}))}),[h]),f=c((e=>{var n;if(!a)return;const{data:r,children:l,parent:i,id:c}=e;let s=[r.value],o=[{id:r.value,name:r.title}];l&&(s=C(h,c));const d=O(r);o=d?[...d,{id:r.value,name:r.title}]:[{id:r.value,name:r.title}];const u=m.includes(r.value)?t.filter((e=>!s.includes(e.id)&&e.id!==i)):(v=[...t,...o],[...new Set(v.map((e=>{const n=Object.keys(e).sort(),a=Object.assign({},...n.map((n=>({[n]:e[n]}))));return JSON.stringify(a)})))].map((e=>JSON.parse(e))));var v;if(i){const e=h[i],t=u.map((e=>e.id));(null===(n=e.data.children)||void 0===n?void 0:n.every((e=>t.includes(e.value))))?(o=[{id:e.data.value,name:e.data.title}],a([...u,...o])):a(u)}else a(u)}),[t,h]),N=e=>{const a=h[e],{data:t}=a,r=m.includes(t.value),l=j(t,m);return n(b,{data:a,classNames:s,onlyRead:o,withIcons:d,iconsComponents:u,renderChildren:e=>e.map(N),onToggle:g,onChange:f,selected:r,indeterminate:!r&&l},e)};return n("div",{className:"wrap",children:p.map(N)})}));export{I as default};
//# sourceMappingURL=index.mjs.map
