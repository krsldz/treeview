import{jsxs as n,jsx as e}from"react/jsx-runtime";import*as t from"react";import{memo as r,useState as i,useMemo as o,useLayoutEffect as a,useCallback as l}from"react";function c(n){var e,t,r="";if("string"==typeof n||"number"==typeof n)r+=n;else if("object"==typeof n)if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=c(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function s(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=c(n))&&(r&&(r+=" "),r+=e);return r}function d(n,e){void 0===e&&(e={});var t=e.insertAt;if(n&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===t&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n))}}d('.checkboxWrap {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.checkboxWrap input[type="checkbox"] {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 16px;\n  height: 16px;\n  border-radius: 2px;\n  border: 1px solid #4C4C4C;\n  outline: none;\n  cursor: pointer;\n  margin: 0;\n}\n\n.checkboxWrap input[type="checkbox"]:disabled {\n  border-color: #C3C3C3;\n  background-color: #DBDBDB;\n}\n\n.checkboxWrap input[type="checkbox"]:disabled + span {\n  color: #DBDBDB;\n}\n\ninput:checked {\n  background-color: #4C4C4C;\n  position: relative;\n}\n\ninput:checked::before {\n  content: url("/public/check.svg");\n  color: #f8f9fa;\n  position: absolute;\n  right: 1px;\n  top: -1px;\n}\n\ninput.indeterminate {\n  background-color: #4C4C4C;\n  position: relative;\n}\n\ninput.indeterminate::before {\n  content: url("/public/indeterminate.svg");\n  color: #f8f9fa;\n  position: absolute;\n  right: 2px;\n  top: -4px;\n}\n');var p,h=r((({label:t,onChange:r,checked:i,disabled:o,indeterminate:a,classNames:l})=>n("div",{className:s("checkboxWrap",l.checkbox),children:[e("input",{type:"checkbox","aria-label":t,className:a?s("indeterminate",l.indeterminate):"",onChange:r,checked:i,disabled:o}),e("span",{className:l.label,children:t})]})));function u(){return u=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},u.apply(null,arguments)}var f,g=function(n){return t.createElement("svg",u({xmlns:"http://www.w3.org/2000/svg",width:9,height:5,fill:"none"},n),p||(p=t.createElement("path",{stroke:"#4C4C4C",strokeLinecap:"round",strokeLinejoin:"round",d:"M1.333 1.167 4.667 4.5 8 1.167"})))};function m(){return m=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},m.apply(null,arguments)}var b=function(n){return t.createElement("svg",m({xmlns:"http://www.w3.org/2000/svg",width:5,height:8,fill:"none"},n),f||(f=t.createElement("path",{stroke:"#4C4C4C",strokeLinecap:"round",strokeLinejoin:"round",d:"m1 7.167 3.333-3.334L1 .5"})))};d(".dropdown {\n  cursor: pointer;\n}\n\n.icon svg {\n  width: 12px;\n  height: 12px;\n}\n");var v=r((({open:n,onClick:t,className:r})=>e("div",{className:s("dropdown",r),onClick:t,children:e("div",{className:"icon",children:e(n?g:b,{})})})));d(".nodeWrap {\n  display: flex;\n  padding: 5px 0 5px 5px;\n  gap: 4px;\n}\n\n.node {\n  display: flex;\n  flex-direction: column;\n}\n\n.titleBlock {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.title {\n  margin-left: 16px;\n}\n\n.folderIcon svg {\n  width: 16px;\n  height: 16px;\n}\n\n");var x=r((({data:t,onlyRead:r,renderChildren:i,onToggle:o,onChange:a,selected:l,indeterminate:c,withIcons:d,classNames:p,iconsComponents:u})=>{const{parentIcon:f,childIcon:g}=u,{data:m,children:b,open:x,id:k}=t,y=b.length>0;return n("div",{className:s("nodeWrap",p.wrap),children:[y&&e(v,{onClick:()=>o(k),open:x,className:p.dropdown}),n("div",{className:s("node",p.node),children:[r?n("div",{className:"titleBlock",children:[d&&(y?f:g),e("span",{className:s(y||d?"":"title",p.label),children:m.title})]}):e(h,{indeterminate:c,checked:l,classNames:Object.assign(Object.assign({},p),{checkbox:s(p.checkbox,y?"":"title")}),onChange:()=>a(t),label:m.title}),x&&y&&e("div",{children:i(b)})]})]})}));const k=(n,e,t)=>n.reduce(((n,r)=>{var i,o;const{value:a,children:l,id:c}=r,s=(null==l?void 0:l.some((n=>t.includes(n.value))))||t.includes(a),d={children:null!==(o=null===(i=r.children)||void 0===i?void 0:i.map((n=>n.id?n.id:n.value)))&&void 0!==o?o:[],data:r,id:c||a,open:s,parent:e||null};let p;return l&&(p=k(l,d.id,t)),Object.assign(Object.assign(Object.assign({},n),p),{[d.id]:d})}),{}),y=(n,e)=>{const{children:t,data:r}=n[e];return[r.value,...t.reduce(((e,t)=>[...e,...y(n,t)]),[])]},w=n=>{if(!n)return[];let e=[];return n.children&&n.children.forEach((n=>{e.push({id:n.value,name:n.title}),e=e.concat(w(n))})),e},C=(n,e)=>!!n.children&&n.children.some((n=>e.includes(n.value)||C(n,e)));var O;function j(){return j=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},j.apply(null,arguments)}var N;function E(){return E=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},E.apply(null,arguments)}const B={parentIcon:e("div",{className:"folderIcon",children:e((function(n){return t.createElement("svg",j({xmlns:"http://www.w3.org/2000/svg",width:18,height:15,fill:"none"},n),O||(O=t.createElement("path",{fill:"#4C4C4C",d:"M5.839.5c.611 0 1.19.26 1.557.7l1 1.2q.04.047.098.074a.3.3 0 0 0 .124.026H16a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H1.946a2.06 2.06 0 0 1-1.376-.513A1.67 1.67 0 0 1 0 12.75V2.25C0 1.786.26 1.247.515 1 .769.753 1.029.5 1.946.5z"})))}),{})}),childIcon:e("div",{className:s("folderIcon","title"),children:e((function(n){return t.createElement("svg",E({xmlns:"http://www.w3.org/2000/svg",width:13,height:17,fill:"none"},n),N||(N=t.createElement("path",{fill:"#4C4C4C",fillRule:"evenodd",d:"M7.35.51c.105.021.202.073.278.149l5.213 5.22c.102.102.159.24.159.384v8.203a2.03 2.03 0 0 1-2.031 2.034H2.03A2.03 2.03 0 0 1 0 14.466V2.534A2.03 2.03 0 0 1 2.031.5h5.214zM2.032 1.586a.95.95 0 0 0-.948.949v11.932a.95.95 0 0 0 .948.95h8.938a.95.95 0 0 0 .948-.95V9.042H7.042A.54.54 0 0 1 6.5 8.5V1.585zm5.552 6.373h4.334v-1.47l-4.334-4.34z",clipRule:"evenodd"})))}),{})})};d('html, body {\n  font-family: sans-serif;\n  font-size: 16px;\n}\n\n.wrap {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n}\n\n.storyCheckbox input[type="checkbox"] {\n  appearance: none;\n  -webkit-appearance: none;\n  width: 20px;\n  height: 20px;\n  border: 2px solid #4caf50;\n  border-radius: 50%;\n  outline: none;\n  cursor: pointer;\n  position: relative;\n  transition: background-color 0.2s ease, border-color 0.2s ease;\n}\n\n.storyCheckbox input[type="checkbox"]:checked {\n  background-color: #4caf50;\n  border-color: #4caf50;\n  position: relative;\n}\n\n.storyCheckbox input[type="checkbox"]:checked::before {\n  content: "";\n  position: absolute;\n  left: 5px;\n  top: 0;\n  width: 5px;\n  height: 10px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n}\n\n.storyCheckbox .indeterminate {\n  background-color: #4caf50;\n  position: relative;\n}\n\n.storyCheckbox .indeterminate::before {\n  content: url("/public/indeterminate.svg");\n  color: #f8f9fa;\n  position: absolute;\n  right: 3px;\n  top: -4px;\n}\n\n\n.storyLabel {\n  margin-left: 5px;\n  font-weight: 200;\n}\n\n.storyDropdown {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  width: 18px;\n  height: 18px;\n  border-radius: 50%;\n  border: 2px solid #4caf50;\n  background-color: #4caf50;\n  color: #4caf50;\n  cursor: pointer;\n  transition: transform 0.2s ease, background-color 0.2s ease;\n  font-size: 14px;\n  line-height: 1;\n  padding: 0;\n}\n\n.storyDropdown img {\n  stroke: #ffff;\n}\n');var I=r((({data:n,onChange:t,value:r=[],classNames:c={},onlyRead:s=!0,withIcons:d=!1,iconsComponents:p=B})=>{const[h,u]=i({}),f=o((()=>r.map((n=>n.id))),[r]);a((()=>{u(k(n,null,f))}),[]);const g=o((()=>Object.keys(h).filter((n=>null===h[n].parent))),[h]),m=l((n=>{const e=Object.assign(Object.assign({},h[n]),{open:!h[n].open});u(Object.assign(Object.assign({},h),{[n]:e}))}),[h]),b=l((n=>{var e;if(!t)return;const{data:i,children:o,parent:a,id:l}=n;let c=[i.value],s=[{id:i.value,name:i.title}];o&&(c=y(h,l));const d=w(i);s=d?[...d,{id:i.value,name:i.title}]:[{id:i.value,name:i.title}];const p=f.includes(i.value)?r.filter((n=>!c.includes(n.id)&&n.id!==a)):(u=[...r,...s],[...new Set(u.map((n=>{const e=Object.keys(n).sort(),t=Object.assign({},...e.map((e=>({[e]:n[e]}))));return JSON.stringify(t)})))].map((n=>JSON.parse(n))));var u;if(a){const n=h[a],r=p.map((n=>n.id));(null===(e=n.data.children)||void 0===e?void 0:e.every((n=>r.includes(n.value))))?(s=[{id:n.data.value,name:n.data.title}],t([...p,...s])):t(p)}else t(p)}),[r,h]),v=n=>{const t=h[n],{data:r}=t,i=f.includes(r.value),o=C(r,f);return e(x,{data:t,classNames:c,onlyRead:s,withIcons:d,iconsComponents:p,renderChildren:n=>n.map(v),onToggle:m,onChange:b,selected:i,indeterminate:!i&&o},n)};return e("div",{className:"wrap",children:g.map(v)})}));export{I as default};
//# sourceMappingURL=index.mjs.map
