"use strict";var n=require("react/jsx-runtime"),e=require("react");function t(n){var e,o,i="";if("string"==typeof n||"number"==typeof n)i+=n;else if("object"==typeof n)if(Array.isArray(n)){var a=n.length;for(e=0;e<a;e++)n[e]&&(o=t(n[e]))&&(i&&(i+=" "),i+=o)}else for(o in n)n[o]&&(i&&(i+=" "),i+=o);return i}function o(){for(var n,e,o=0,i="",a=arguments.length;o<a;o++)(n=arguments[o])&&(e=t(n))&&(i&&(i+=" "),i+=e);return i}function i(n,e){void 0===e&&(e={});var t=e.insertAt;if(n&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===t&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n))}}i('.checkboxWrap {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.checkboxWrap input[type="checkbox"] {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 16px;\n  height: 16px;\n  border-radius: 2px;\n  border: 1px solid #4C4C4C;\n  outline: none;\n  cursor: pointer;\n  margin: 0;\n}\n\n.checkboxWrap input[type="checkbox"]:disabled {\n  border-color: #C3C3C3;\n  background-color: #DBDBDB;\n}\n\n.checkboxWrap input[type="checkbox"]:disabled + span {\n  color: #DBDBDB;\n}\n\ninput:checked {\n  background-color: #4C4C4C;\n  position: relative;\n}\n\ninput:checked::before {\n  content: url("/public/check.svg");\n  color: #f8f9fa;\n  position: absolute;\n  right: 1px;\n  top: -1px;\n}\n\ninput.indeterminate {\n  background-color: #4C4C4C;\n  position: relative;\n}\n\ninput.indeterminate::before {\n  content: url("/public/indeterminate.svg");\n  color: #f8f9fa;\n  position: absolute;\n  right: 2px;\n  top: -4px;\n}\n');var a=e.memo((({label:e,onChange:t,checked:i,disabled:a,indeterminate:r,classNames:c})=>n.jsxs("div",{className:o("checkboxWrap",c.checkbox),children:[n.jsx("input",{type:"checkbox","aria-label":e,className:r?o("indeterminate",c.indeterminate):"",onChange:t,checked:i,disabled:a}),n.jsx("span",{className:c.label,children:e})]})));i(".dropdown {\n  cursor: pointer;\n}\n\n.icon {\n  width: 12px;\n  height: 12px;\n}\n");var r=e.memo((({open:e,onClick:t,className:i})=>n.jsx("div",{className:o("dropdown",i),onClick:t,children:n.jsx("img",{className:"icon",src:e?"/chevronDown.svg":"/chevronLeft.svg",alt:"dropdown"})})));i(".nodeWrap {\n  display: flex;\n  padding: 5px 0 5px 5px;\n  gap: 4px;\n}\n\n.node {\n  display: flex;\n  flex-direction: column;\n}\n\n.titleBlock {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.title {\n  margin-left: 16px;\n}\n\n.folderIcon {\n  width: 16px;\n  height: 16px;\n}\n\n");var c=e.memo((({data:e,onlyRead:t,renderChildren:i,onToggle:c,onChange:s,selected:l,indeterminate:d,withIcons:p,classNames:u,iconsComponents:h})=>{const{parentIcon:m,childIcon:x}=h,{data:b,children:f,open:g,id:v}=e,k=f.length>0;return n.jsxs("div",{className:o("nodeWrap",u.wrap),children:[k&&n.jsx(r,{onClick:()=>c(v),open:g,className:u.dropdown}),n.jsxs("div",{className:o("node",u.node),children:[t?n.jsxs("div",{className:"titleBlock",children:[p&&(k?m:x),n.jsx("span",{className:o(k||p?"":"title",u.label),children:b.title})]}):n.jsx(a,{indeterminate:d,checked:l,classNames:Object.assign(Object.assign({},u),{checkbox:o(u.checkbox,k?"":"title")}),onChange:()=>s(e),label:b.title}),g&&k&&n.jsx("div",{children:i(f)})]})]})}));const s=(n,e,t)=>n.reduce(((n,o)=>{var i,a;const{value:r,children:c,id:l}=o,d=(null==c?void 0:c.some((n=>t.includes(n.value))))||t.includes(r),p={children:null!==(a=null===(i=o.children)||void 0===i?void 0:i.map((n=>n.id?n.id:n.value)))&&void 0!==a?a:[],data:o,id:l||r,open:d,parent:e||null};let u;return c&&(u=s(c,p.id,t)),Object.assign(Object.assign(Object.assign({},n),u),{[p.id]:p})}),{}),l=(n,e)=>{const{children:t,data:o}=n[e];return[o.value,...t.reduce(((e,t)=>[...e,...l(n,t)]),[])]},d=n=>{if(!n)return[];let e=[];return n.children&&n.children.forEach((n=>{e.push({id:n.value,name:n.title}),e=e.concat(d(n))})),e},p=(n,e)=>!!n.children&&n.children.some((n=>e.includes(n.value)||p(n,e))),u={parentIcon:n.jsx("img",{className:"folderIcon",src:"/folderClosed.svg",alt:"folder"}),childIcon:n.jsx("img",{className:o("folderIcon","title"),src:"file.svg",alt:"file"})};i('html, body {\n  font-family: sans-serif;\n  font-size: 16px;\n}\n\n.wrap {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n}\n\n.storyCheckbox input[type="checkbox"] {\n  appearance: none;\n  -webkit-appearance: none;\n  width: 20px;\n  height: 20px;\n  border: 2px solid #4caf50;\n  border-radius: 50%;\n  outline: none;\n  cursor: pointer;\n  position: relative;\n  transition: background-color 0.2s ease, border-color 0.2s ease;\n}\n\n.storyCheckbox input[type="checkbox"]:checked {\n  background-color: #4caf50;\n  border-color: #4caf50;\n  position: relative;\n}\n\n.storyCheckbox input[type="checkbox"]:checked::before {\n  content: "";\n  position: absolute;\n  left: 5px;\n  top: 0;\n  width: 5px;\n  height: 10px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n}\n\n.storyCheckbox .indeterminate {\n  background-color: #4caf50;\n  position: relative;\n}\n\n.storyCheckbox .indeterminate::before {\n  content: url("/public/indeterminate.svg");\n  color: #f8f9fa;\n  position: absolute;\n  right: 3px;\n  top: -4px;\n}\n\n\n.storyLabel {\n  margin-left: 5px;\n  font-weight: 200;\n}\n\n.storyDropdown {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  width: 18px;\n  height: 18px;\n  border-radius: 50%;\n  border: 2px solid #4caf50;\n  background-color: #4caf50;\n  color: #4caf50;\n  cursor: pointer;\n  transition: transform 0.2s ease, background-color 0.2s ease;\n  font-size: 14px;\n  line-height: 1;\n  padding: 0;\n}\n\n.storyDropdown img {\n  stroke: #ffff;\n}\n');e.memo((({data:t,onChange:o,value:i=[],classNames:a={},onlyRead:r=!0,withIcons:h=!1,iconsComponents:m=u})=>{const[x,b]=e.useState({}),f=e.useMemo((()=>i.map((n=>n.id))),[i]);e.useLayoutEffect((()=>{b(s(t,null,f))}),[]);const g=e.useMemo((()=>Object.keys(x).filter((n=>null===x[n].parent))),[x]),v=e.useCallback((n=>{const e=Object.assign(Object.assign({},x[n]),{open:!x[n].open});b(Object.assign(Object.assign({},x),{[n]:e}))}),[x]),k=e.useCallback((n=>{var e;if(!o)return;const{data:t,children:a,parent:r,id:c}=n;let s=[t.value],p=[{id:t.value,name:t.title}];a&&(s=l(x,c));const u=d(t);p=u?[...u,{id:t.value,name:t.title}]:[{id:t.value,name:t.title}];const h=f.includes(t.value)?i.filter((n=>!s.includes(n.id)&&n.id!==r)):(m=[...i,...p],[...new Set(m.map((n=>{const e=Object.keys(n).sort(),t=Object.assign({},...e.map((e=>({[e]:n[e]}))));return JSON.stringify(t)})))].map((n=>JSON.parse(n))));var m;if(r){const n=x[r],t=h.map((n=>n.id));(null===(e=n.data.children)||void 0===e?void 0:e.every((n=>t.includes(n.value))))?(p=[{id:n.data.value,name:n.data.title}],o([...h,...p])):o(h)}else o(h)}),[i,x]),y=e=>{const t=x[e],{data:o}=t,i=f.includes(o.value),s=p(o,f);return n.jsx(c,{data:t,classNames:a,onlyRead:r,withIcons:h,iconsComponents:m,renderChildren:n=>n.map(y),onToggle:v,onChange:k,selected:i,indeterminate:!i&&s},e)};return n.jsx("div",{className:"wrap",children:g.map(y)})}));
//# sourceMappingURL=index.js.map
