"use strict";var n=require("react/jsx-runtime"),e=require("react");function t(n){var e=Object.create(null);return n&&Object.keys(n).forEach((function(t){if("default"!==t){var r=Object.getOwnPropertyDescriptor(n,t);Object.defineProperty(e,t,r.get?r:{enumerable:!0,get:function(){return n[t]}})}})),e.default=n,Object.freeze(e)}var r=t(e);function i(n){var e,t,r="";if("string"==typeof n||"number"==typeof n)r+=n;else if("object"==typeof n)if(Array.isArray(n)){var a=n.length;for(e=0;e<a;e++)n[e]&&(t=i(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function a(){for(var n,e,t=0,r="",a=arguments.length;t<a;t++)(n=arguments[t])&&(e=i(n))&&(r&&(r+=" "),r+=e);return r}function o(n,e){void 0===e&&(e={});var t=e.insertAt;if(n&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===t&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n))}}o('.checkboxWrap {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.checkboxWrap input[type="checkbox"] {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 16px;\n  height: 16px;\n  border-radius: 2px;\n  border: 1px solid #4C4C4C;\n  outline: none;\n  cursor: pointer;\n  margin: 0;\n}\n\n.checkboxWrap input[type="checkbox"]:disabled {\n  border-color: #C3C3C3;\n  background-color: #DBDBDB;\n}\n\n.checkboxWrap input[type="checkbox"]:disabled + span {\n  color: #DBDBDB;\n}\n\ninput:checked {\n  background-color: #4C4C4C;\n  position: relative;\n}\n\ninput:checked::before {\n  content: url("/public/check.svg");\n  color: #f8f9fa;\n  position: absolute;\n  right: 1px;\n  top: -1px;\n}\n\ninput.indeterminate {\n  background-color: #4C4C4C;\n  position: relative;\n}\n\ninput.indeterminate::before {\n  content: url("/public/indeterminate.svg");\n  color: #f8f9fa;\n  position: absolute;\n  right: 2px;\n  top: -4px;\n}\n');var c,l=e.memo((({label:e,onChange:t,checked:r,disabled:i,indeterminate:o,classNames:c})=>n.jsxs("div",{className:a("checkboxWrap",c.checkbox),children:[n.jsx("input",{type:"checkbox","aria-label":e,className:o?a("indeterminate",c.indeterminate):"",onChange:t,checked:r,disabled:i}),n.jsx("span",{className:c.label,children:e})]})));function s(){return s=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},s.apply(null,arguments)}var d,p=function(n){return r.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",width:9,height:5,fill:"none"},n),c||(c=r.createElement("path",{stroke:"#4C4C4C",strokeLinecap:"round",strokeLinejoin:"round",d:"M1.333 1.167 4.667 4.5 8 1.167"})))};function u(){return u=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},u.apply(null,arguments)}var h=function(n){return r.createElement("svg",u({xmlns:"http://www.w3.org/2000/svg",width:5,height:8,fill:"none"},n),d||(d=r.createElement("path",{stroke:"#4C4C4C",strokeLinecap:"round",strokeLinejoin:"round",d:"m1 7.167 3.333-3.334L1 .5"})))};o(".dropdown {\n  cursor: pointer;\n}\n\n.icon svg {\n  width: 12px;\n  height: 12px;\n}\n");var f=e.memo((({open:e,onClick:t,className:r})=>n.jsx("div",{className:a("dropdown",r),onClick:t,children:n.jsx("div",{className:"icon",children:e?n.jsx(p,{}):n.jsx(h,{})})})));o(".nodeWrap {\n  display: flex;\n  padding: 5px 0 5px 5px;\n  gap: 4px;\n}\n\n.node {\n  display: flex;\n  flex-direction: column;\n}\n\n.titleBlock {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.title {\n  margin-left: 16px;\n}\n\n.folderIcon svg {\n  width: 16px;\n  height: 16px;\n}\n\n");var m=e.memo((({data:e,onlyRead:t,renderChildren:r,onToggle:i,onChange:o,selected:c,indeterminate:s,withIcons:d,classNames:p,iconsComponents:u})=>{const{parentIcon:h,childIcon:m}=u,{data:b,children:g,open:x,id:v}=e,k=g.length>0;return n.jsxs("div",{className:a("nodeWrap",p.wrap),children:[k&&n.jsx(f,{onClick:()=>i(v),open:x,className:p.dropdown}),n.jsxs("div",{className:a("node",p.node),children:[t?n.jsxs("div",{className:"titleBlock",children:[d&&(k?h:m),n.jsx("span",{className:a(k||d?"":"title",p.label),children:b.title})]}):n.jsx(l,{indeterminate:s,checked:c,classNames:Object.assign(Object.assign({},p),{checkbox:a(p.checkbox,k?"":"title")}),onChange:()=>o(e),label:b.title}),x&&k&&n.jsx("div",{children:r(g)})]})]})}));const b=(n,e,t)=>n.reduce(((n,r)=>{var i,a;const{value:o,children:c,id:l}=r,s=(null==c?void 0:c.some((n=>t.includes(n.value))))||t.includes(o),d={children:null!==(a=null===(i=r.children)||void 0===i?void 0:i.map((n=>n.id?n.id:n.value)))&&void 0!==a?a:[],data:r,id:l||o,open:s,parent:e||null};let p;return c&&(p=b(c,d.id,t)),Object.assign(Object.assign(Object.assign({},n),p),{[d.id]:d})}),{}),g=(n,e)=>{const{children:t,data:r}=n[e];return[r.value,...t.reduce(((e,t)=>[...e,...g(n,t)]),[])]},x=n=>{if(!n)return[];let e=[];return n.children&&n.children.forEach((n=>{e.push({id:n.value,name:n.title}),e=e.concat(x(n))})),e},v=(n,e)=>!!n.children&&n.children.some((n=>e.includes(n.value)||v(n,e)));var k;function y(){return y=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},y.apply(null,arguments)}var j;function C(){return C=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},C.apply(null,arguments)}const w={parentIcon:n.jsx("div",{className:"folderIcon",children:n.jsx((function(n){return r.createElement("svg",y({xmlns:"http://www.w3.org/2000/svg",width:18,height:15,fill:"none"},n),k||(k=r.createElement("path",{fill:"#4C4C4C",d:"M5.839.5c.611 0 1.19.26 1.557.7l1 1.2q.04.047.098.074a.3.3 0 0 0 .124.026H16a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H1.946a2.06 2.06 0 0 1-1.376-.513A1.67 1.67 0 0 1 0 12.75V2.25C0 1.786.26 1.247.515 1 .769.753 1.029.5 1.946.5z"})))}),{})}),childIcon:n.jsx("div",{className:a("folderIcon","title"),children:n.jsx((function(n){return r.createElement("svg",C({xmlns:"http://www.w3.org/2000/svg",width:13,height:17,fill:"none"},n),j||(j=r.createElement("path",{fill:"#4C4C4C",fillRule:"evenodd",d:"M7.35.51c.105.021.202.073.278.149l5.213 5.22c.102.102.159.24.159.384v8.203a2.03 2.03 0 0 1-2.031 2.034H2.03A2.03 2.03 0 0 1 0 14.466V2.534A2.03 2.03 0 0 1 2.031.5h5.214zM2.032 1.586a.95.95 0 0 0-.948.949v11.932a.95.95 0 0 0 .948.95h8.938a.95.95 0 0 0 .948-.95V9.042H7.042A.54.54 0 0 1 6.5 8.5V1.585zm5.552 6.373h4.334v-1.47l-4.334-4.34z",clipRule:"evenodd"})))}),{})})};o('html, body {\n  font-family: sans-serif;\n  font-size: 16px;\n}\n\n.wrap {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n}\n\n.storyCheckbox input[type="checkbox"] {\n  appearance: none;\n  -webkit-appearance: none;\n  width: 20px;\n  height: 20px;\n  border: 2px solid #4caf50;\n  border-radius: 50%;\n  outline: none;\n  cursor: pointer;\n  position: relative;\n  transition: background-color 0.2s ease, border-color 0.2s ease;\n}\n\n.storyCheckbox input[type="checkbox"]:checked {\n  background-color: #4caf50;\n  border-color: #4caf50;\n  position: relative;\n}\n\n.storyCheckbox input[type="checkbox"]:checked::before {\n  content: "";\n  position: absolute;\n  left: 5px;\n  top: 0;\n  width: 5px;\n  height: 10px;\n  border: solid white;\n  border-width: 0 2px 2px 0;\n  transform: rotate(45deg);\n}\n\n.storyCheckbox .indeterminate {\n  background-color: #4caf50;\n  position: relative;\n}\n\n.storyCheckbox .indeterminate::before {\n  content: url("/public/indeterminate.svg");\n  color: #f8f9fa;\n  position: absolute;\n  right: 3px;\n  top: -4px;\n}\n\n\n.storyLabel {\n  margin-left: 5px;\n  font-weight: 200;\n}\n\n.storyDropdown {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  width: 18px;\n  height: 18px;\n  border-radius: 50%;\n  border: 2px solid #4caf50;\n  background-color: #4caf50;\n  color: #4caf50;\n  cursor: pointer;\n  transition: transform 0.2s ease, background-color 0.2s ease;\n  font-size: 14px;\n  line-height: 1;\n  padding: 0;\n}\n\n.storyDropdown img {\n  stroke: #ffff;\n}\n');var O=e.memo((({data:t,onChange:r,value:i=[],classNames:a={},onlyRead:o=!0,withIcons:c=!1,iconsComponents:l=w})=>{const[s,d]=e.useState({}),p=e.useMemo((()=>i.map((n=>n.id))),[i]);e.useLayoutEffect((()=>{d(b(t,null,p))}),[]);const u=e.useMemo((()=>Object.keys(s).filter((n=>null===s[n].parent))),[s]),h=e.useCallback((n=>{const e=Object.assign(Object.assign({},s[n]),{open:!s[n].open});d(Object.assign(Object.assign({},s),{[n]:e}))}),[s]),f=e.useCallback((n=>{var e;if(!r)return;const{data:t,children:a,parent:o,id:c}=n;let l=[t.value],d=[{id:t.value,name:t.title}];a&&(l=g(s,c));const u=x(t);d=u?[...u,{id:t.value,name:t.title}]:[{id:t.value,name:t.title}];const h=p.includes(t.value)?i.filter((n=>!l.includes(n.id)&&n.id!==o)):(f=[...i,...d],[...new Set(f.map((n=>{const e=Object.keys(n).sort(),t=Object.assign({},...e.map((e=>({[e]:n[e]}))));return JSON.stringify(t)})))].map((n=>JSON.parse(n))));var f;if(o){const n=s[o],t=h.map((n=>n.id));(null===(e=n.data.children)||void 0===e?void 0:e.every((n=>t.includes(n.value))))?(d=[{id:n.data.value,name:n.data.title}],r([...h,...d])):r(h)}else r(h)}),[i,s]),k=e=>{const t=s[e],{data:r}=t,i=p.includes(r.value),d=v(r,p);return n.jsx(m,{data:t,classNames:a,onlyRead:o,withIcons:c,iconsComponents:l,renderChildren:n=>n.map(k),onToggle:h,onChange:f,selected:i,indeterminate:!i&&d},e)};return n.jsx("div",{className:"wrap",children:u.map(k)})}));module.exports=O;
//# sourceMappingURL=index.js.map
