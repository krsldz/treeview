"use strict";var e=require("react/jsx-runtime"),n=require("react");function t(e){var n=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var a=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,a.get?a:{enumerable:!0,get:function(){return e[t]}})}})),n.default=e,Object.freeze(n)}var a=t(n);function r(e){var n,t,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e)){var l=e.length;for(n=0;n<l;n++)e[n]&&(t=r(e[n]))&&(a&&(a+=" "),a+=t)}else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function l(){for(var e,n,t=0,a="",l=arguments.length;t<l;t++)(e=arguments[t])&&(n=r(e))&&(a&&(a+=" "),a+=n);return a}var i,s=n.memo((({label:n,onChange:t,checked:a,disabled:r,indeterminate:i,classNames:s})=>e.jsxs("div",{className:l("checkboxWrap",s.checkbox),children:[e.jsx("input",{type:"checkbox","aria-label":n,className:i?l("indeterminate",s.indeterminate):"",onChange:t,checked:a,disabled:r}),e.jsx("span",{className:s.label,children:n})]})));function c(){return c=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},c.apply(null,arguments)}var o,d=function(e){return a.createElement("svg",c({xmlns:"http://www.w3.org/2000/svg",width:9,height:5,fill:"none"},e),i||(i=a.createElement("path",{stroke:"#4C4C4C",strokeLinecap:"round",strokeLinejoin:"round",d:"M1.333 1.167 4.667 4.5 8 1.167"})))};function u(){return u=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},u.apply(null,arguments)}var h=function(e){return a.createElement("svg",u({xmlns:"http://www.w3.org/2000/svg",width:5,height:8,fill:"none"},e),o||(o=a.createElement("path",{stroke:"#4C4C4C",strokeLinecap:"round",strokeLinejoin:"round",d:"m1 7.167 3.333-3.334L1 .5"})))};var v=n.memo((({open:n,onClick:t,className:a})=>e.jsx("div",{className:l("dropdown",a),onClick:t,children:n?e.jsxs("div",{className:"iconActive",children:[e.jsx(d,{})," "]}):e.jsx("div",{className:"icon",children:e.jsx(h,{})})})));var m=n.memo((({data:n,onlyRead:t,renderChildren:a,onToggle:r,onChange:i,selected:c,indeterminate:o,withIcons:d,classNames:u,iconsComponents:h})=>{const{parentIcon:m,childIcon:p}=h,{data:f,children:g,open:j,id:b}=n,w=g.length>0;return e.jsxs("div",{className:l("nodeWrap",u.wrap),children:[w&&e.jsx(v,{onClick:()=>r(b),open:j,className:u.dropdown}),e.jsxs("div",{className:l("node",u.node),children:[t?e.jsxs("div",{className:"titleBlock",children:[d&&(w?m:p),e.jsx("span",{className:l(w||d?"":"title",u.label),children:f.title})]}):e.jsx(s,{indeterminate:o,checked:c,classNames:Object.assign(Object.assign({},u),{checkbox:l(u.checkbox,w?"":"title")}),onChange:()=>i(n),label:f.title}),j&&w&&e.jsx("div",{children:a(g)})]})]})}));const p=(e,n,t)=>e.reduce(((e,a)=>{var r,l;const{value:i,children:s,id:c}=a,o=(null==s?void 0:s.some((e=>t.includes(e.value))))||t.includes(i),d={children:null!==(l=null===(r=a.children)||void 0===r?void 0:r.map((e=>e.id?e.id:e.value)))&&void 0!==l?l:[],data:a,id:c||i,open:o,parent:n||null};let u;return s&&(u=p(s,d.id,t)),Object.assign(Object.assign(Object.assign({},e),u),{[d.id]:d})}),{}),f=(e,n)=>{const{children:t,data:a}=e[n];return[a.value,...t.reduce(((n,t)=>[...n,...f(e,t)]),[])]},g=e=>{if(!e)return[];let n=[];return e.children&&e.children.forEach((e=>{n.push({id:e.value,name:e.title}),n=n.concat(g(e))})),n},j=(e,n)=>!!e.children&&e.children.some((e=>n.includes(e.value)||j(e,n)));var b;function w(){return w=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},w.apply(null,arguments)}var x;function O(){return O=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},O.apply(null,arguments)}const C={parentIcon:e.jsx("div",{className:"folderIcon",children:e.jsx((function(e){return a.createElement("svg",w({xmlns:"http://www.w3.org/2000/svg",width:18,height:15,fill:"none"},e),b||(b=a.createElement("path",{fill:"#4C4C4C",d:"M5.839.5c.611 0 1.19.26 1.557.7l1 1.2q.04.047.098.074a.3.3 0 0 0 .124.026H16a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H1.946a2.06 2.06 0 0 1-1.376-.513A1.67 1.67 0 0 1 0 12.75V2.25C0 1.786.26 1.247.515 1 .769.753 1.029.5 1.946.5z"})))}),{})}),childIcon:e.jsx("div",{className:l("folderIcon","title"),children:e.jsx((function(e){return a.createElement("svg",O({xmlns:"http://www.w3.org/2000/svg",width:13,height:17,fill:"none"},e),x||(x=a.createElement("path",{fill:"#4C4C4C",fillRule:"evenodd",d:"M7.35.51c.105.021.202.073.278.149l5.213 5.22c.102.102.159.24.159.384v8.203a2.03 2.03 0 0 1-2.031 2.034H2.03A2.03 2.03 0 0 1 0 14.466V2.534A2.03 2.03 0 0 1 2.031.5h5.214zM2.032 1.586a.95.95 0 0 0-.948.949v11.932a.95.95 0 0 0 .948.95h8.938a.95.95 0 0 0 .948-.95V9.042H7.042A.54.54 0 0 1 6.5 8.5V1.585zm5.552 6.373h4.334v-1.47l-4.334-4.34z",clipRule:"evenodd"})))}),{})})};var y=n.memo((({data:t,onChange:a,value:r=[],classNames:l={},onlyRead:i=!0,withIcons:s=!1,iconsComponents:c=C})=>{const[o,d]=n.useState({}),u=n.useMemo((()=>r.map((e=>e.id))),[r]);n.useLayoutEffect((()=>{d(p(t,null,u))}),[]);const h=n.useMemo((()=>Object.keys(o).filter((e=>null===o[e].parent))),[o]),v=n.useCallback((e=>{const n=Object.assign(Object.assign({},o[e]),{open:!o[e].open});d(Object.assign(Object.assign({},o),{[e]:n}))}),[o]),b=n.useCallback((e=>{var n;if(!a)return;const{data:t,children:l,parent:i,id:s}=e;let c=[t.value],d=[{id:t.value,name:t.title}];l&&(c=f(o,s));const h=g(t);d=h?[...h,{id:t.value,name:t.title}]:[{id:t.value,name:t.title}];const v=u.includes(t.value)?r.filter((e=>!c.includes(e.id)&&e.id!==i)):(m=[...r,...d],[...new Set(m.map((e=>{const n=Object.keys(e).sort(),t=Object.assign({},...n.map((n=>({[n]:e[n]}))));return JSON.stringify(t)})))].map((e=>JSON.parse(e))));var m;if(i){const e=o[i],t=v.map((e=>e.id));(null===(n=e.data.children)||void 0===n?void 0:n.every((e=>t.includes(e.value))))?(d=[{id:e.data.value,name:e.data.title}],a([...v,...d])):a(v)}else a(v)}),[r,o]),w=n=>{const t=o[n],{data:a}=t,r=u.includes(a.value),d=j(a,u);return e.jsx(m,{data:t,classNames:l,onlyRead:i,withIcons:s,iconsComponents:c,renderChildren:e=>e.map(w),onToggle:v,onChange:b,selected:r,indeterminate:!r&&d},n)};return e.jsx("div",{className:"wrap",children:h.map(w)})}));module.exports=y;
//# sourceMappingURL=index.js.map
